<!--
  TODO li should hve optional class selected, calculated as follows:
    {{report._id === loadingContent || !loadingContent && report._id === selected._id ? 'selected' : ''}}
  This highlight is not useful on mobile, and needs a click listener or similar implemented for desktop users.
-->
<li class="{{isRead(report) ? 'read' : ''}}">
  <!-- We define hrefs weirdly here, as otherwise they end up as "#reports/{}" -->
  <a class="message-wrapper" {{'href="#reports/'+report._id+'"'}}>
    <span class="mm-badge mm-badge-round mm-badge-border {{report.errors.length ? 'mm-badge-red' : 'mm-badge-green'}}">
      <span class="fa {{report.verified ? 'fa-check' : ''}}"></span>
    </span>
    <div class="detail">
      <span class="time">{{report.reported_date | relativeDate}}</span>
      <!-- TODO insert `mm-sender message="report"` here -->
      <div class="sender">
        <div>
          <span class="name">
            {{report.contact.name || report.from || report.sent_by}}
          </span>
          <span class="phone">
            {{report.contact.phone}}
          </span>
        </div>
        <div class="position">
          {{report.contact.parent | clinic}}
        </div>
      </div>
      <div class="description">{{report | summary:forms}}</div>
    </div>
  </a>
</li>
