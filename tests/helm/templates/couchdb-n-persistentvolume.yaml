{{- range $i, $e := until 3 }}
{{ $nodeNumber := add $i 1 }}
apiVersion: v1
kind: PersistentVolume
metadata:
  name: couchdb-pv-{{ $.Values.namespace }}-{{ $nodeNumber }}
spec:
  capacity:
    storage: 100Mi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: local-path
  hostPath:
    path: {{ index $.Values.local_path (printf "preExistingDiskPath-%d" $nodeNumber) }}
    type: DirectoryOrCreate
--- #Don't remove the separator. We need this to separate yamls generated by the range command.
{{- end }}
